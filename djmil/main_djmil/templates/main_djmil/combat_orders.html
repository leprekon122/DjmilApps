{% extends 'main_djmil/layout.html'%}


{%block title%}Combat order{%endblock%}


{%block content%}
<div class="container-fluid orders" xmlns="http://www.w3.org/1999/html">
    <div class="orders_search">
        <div class="alert alert-dark alert-search ">
            <div class="download_orders">
                <h5 class="title">Завантаження</h5>
                <form method="get">
                    <select name="options" class="form-control" aria-label="Default select example">
                        <option selected>типи звітів для завантаження</option>
                        <option value="newest">Сортування за новими</option>
                        <option value="oldest">Сортування за старими</option>
                        <option value="without">без сортування</option>
                    </select>
                    <br>
                    <button class="btn btn-dark" name="download" value="download">download</button>
                    <button class="btn btn-dark" name="update_data" value="update_data" id="update_data">update_data
                    </button>

                </form>
            </div>
            <br>

            <div class="main_search_all">
                <div class="hide" id="hide">
                    <i class="fa-solid fa-arrow-up text-danger" onclick="hide_main_search()"></i>
                </div>
                <div class="show_btn" id="show">
                    <i class="fa-solid fa-arrow-down" onclick="show_main_search()"></i>
                </div>
                <h5 class="title">Сортування</h5>
                <div class="main_search" id="main_search">
                    <form method="get">
                        <input type="date" class="form-control" name="date_search">
                        <br>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="today" value="today"
                                   id="flexCheckChecked_today">
                            <label class="form-check-label" for="flexCheckChecked_today">
                                за сьогодні
                            </label>
                        </div>
                        <br>
                        <button class="btn btn-success search-btn" type="submit">пошук</button>
                    </form>
                </div>
            </div>
            <br>
            <div class="chose_orders">
                <div class="dropdown">
                    <button class="btn btn-warning dropdown-toggle" type="button" id="dropdownMenuButton"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        вибери звіт
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="{% url 'online_second_orders' %}">Детальній Звіт</a>
                        <a class="dropdown-item" href="{% url 'combat_orders' %}">Бойоввий звіт</a>
                    </div>
                </div>

            </div>
            <br>
            <div class="build_orders_all">
                <div class="hide" id="hide_build_orders_all" onclick="show_and_hide()">
                    <i class="fa-solid fa-arrow-up text-danger" onclick="hide_build_orders_all()"></i>
                </div>
                <div class="show_btn" id="show_build_orders_all">
                    <i class="fa-solid fa-arrow-down" onclick="show_build_orders_all()"></i>
                </div>
                <h5 class="title">Побудувати звіт</h5>
                <div class="build_orders" id="build_orders">
                    <form method="get">
                        Звіт з:
                        <input type="date" class="form-control" name="start_cut">
                        Звіт по:
                        <input type="date" class="form-control" name="end_cup">
                        <br>
                        <button class="btn btn-success" type="submit" name="build_order" value="build_order">Збудувати
                            звіт
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% if model|length > 0 %}
    <div class="combat_data">

        {%if action == 0%}
        {%for el in model%}
        <div class="alert alert-dark combat_alert">
            <form method="get">
                <button class="btn btn-success" type="submit" name="open_data" value="{{el.serial_no}} {{el.dt}}">
                    {{el.serial_no}}
                </button>
            </form>
            <div class="combat_alert_data">
                <span class="text-light">Дата виявлення:</span>
                <p class="text-light">{{el.dt}}</p>
            </div>
            <div class="combat_alert_data">
                <span class="text-light">Кількість польтів за дату:</span>
                <p class="text-light">{{el.quantity}}</p>
            </div>
        </div>
        {%endfor%}
        {%else%}
        <br>


        <div class="alert alert-dark combat_dark">
            <p class="text-light"><span class="text-warning">серійний номер:</span> {{model.serial_no}}</p>
            <p class="text-light"><span class="text-warning">дата выявлення:</span> {{model.dt}}</p>

        </div>

        <div class="main_map">
            <div id="myMap" style="position:relative;width:600px;height:300px;">
                <h5 id='point' class="text-dark">x</h5>
            </div>
            <div class="map_data">
                <input placeholder="координати" type="text" id="loc">
                <button onclick="GetMap()" class="btn btn-success">пошук</button>
            </div>
        </div>


        <br>
        <table class="table table-dark table-sm table-hover table-bordered">
            <thead>
            <tr>
                <th scope="col">коордінати дрона</th>
                <th scope="col">height</th>
                <th scope="col">altitude</th>
                <th scope="col">коордінати пульта</th>
                <th scope="col">коордінати homepoint</th>


            </tr>
            </thead>
            {%for el in model_detail%}
            <tbody>
            <tr>
                <td>
                    {{el.latitude}}
                    {{el.longitude}}

                </td>
                <td>{{el.height}}</td>
                <td>{{el.altitude}}</td>
                <td>
                    {{el.phone_app_latitude}}
                    {{el.phone_app_longitude}}
                </td>
                <td class="len_lon" onclick="GetMap()">
                    {{el.home_latitude}}
                    {{el.home_longitude}}
                </td>


            </tr>

            </tbody>
            {%endfor%}

        </table>
        {%endif%}
    </div>
    {%else%}
    <div class="no_data">
        <h3 class="text-light">no such data</h3>
    </div>
    {%endif%}
</div>

<script type='text/javascript' src="/static/main_djmil/js/bing_map_api_js.js">
</script>

<script src="/static/main_djmil/js/main_js.js">
</script>


{%endblock%}