{% extends 'main_djmil/layout.html'%}


{%block title%}Combat order{%endblock%}


{%block content%}
<div class="container-fluid orders" xmlns="http://www.w3.org/1999/html">
    <div class="orders_search">
        <div class="alert alert-dark alert-search text-light"
             style="background: linear-gradient(to right, #0c0c0d,#d9a30f, #0c0c0d)">

            <div class="main_search_all">
                <div class="hide" id="hide">
                    <i class="fa-solid fa-arrow-up text-danger" onclick="hide_main_search()"></i>
                </div>
                <div class="show_btn" id="show">
                    <i class="fa-solid fa-arrow-down" onclick="show_main_search()"></i>
                </div>
                <h5 class="title">Сортування</h5>
                <div class="main_search" id="main_search">
                    <form method="get">
                        <input type="date" class="form-control" name="date_search">
                        <br>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="fakefake" value="fakefake"
                                   id="fakedrone">
                            <label class="form-check-label" for="fakedrone">
                                без fake drone
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="today" value="today"
                                   id="flexCheckChecked_today">
                            <label class="form-check-label" for="flexCheckChecked_today">
                                за сьогодні
                            </label>
                        </div>
                        <br>
                        <button class="btn btn-warning search-btn text-light main_btn" type="submit">пошук</button>
                    </form>
                </div>
            </div>
            <br>
            <div class="chose_orders">
                <div class="dropdown">
                    <button class="btn btn-warning dropdown-toggle text-light main_btn" type="button"
                            id="dropdownMenuButton"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        вибери звіт
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="{% url 'online_second_orders' %}">Детальній Звіт</a>
                        <a class="dropdown-item" href="{% url 'combat_orders' %}">Бойоввий звіт</a>
                    </div>
                </div>

            </div>
            <br>
            <div class="build_orders_all">
                <div class="hide" id="hide_build_orders_all" onclick="show_and_hide()">
                    <i class="fa-solid fa-arrow-up text-danger" onclick="hide_build_orders_all()"></i>
                </div>
                <div class="show_btn" id="show_build_orders_all">
                    <i class="fa-solid fa-arrow-down" onclick="show_build_orders_all()"></i>
                </div>
                <h5 class="title">Побудувати звіт</h5>
                <div class="build_orders" id="build_orders">
                    <form method="get">
                        Звіт з:
                        <input type="date" class="form-control" name="start_cut">
                        Звіт по:
                        <input type="date" class="form-control" name="end_cup">
                        <br>
                        <button class="btn btn-warning text-light main_btn" type="submit" name="build_order"
                                value="build_order">Збудувати
                            звіт
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% if model|length > 0 %}
    <div class="combat_data">

        {%if action == 0%}
        {%for el in model%}
        <div class="alert alert-warning combat_alert"
             style="background: linear-gradient(to right, #0c0c0d, #a6700c, #0c0c0d)">
            <form method="get">
                <button class="btn btn-warning main_btn text-light" type="submit" name="open_data"
                        value="{{el.serial_no}} {{el.dt}}">
                    {{el.serial_no}}
                </button>
            </form>
            <div class="combat_alert_data">
                <span class="text-light">Дата виявлення:</span>
                <p class="text-light">{{el.dt}}</p>
            </div>
            <div class="combat_alert_data">
                <span class="text-light">Кількість польтів за дату:</span>
                <p class="text-light">{{el.quantity}}</p>
            </div>
        </div>
        {%endfor%}
        {%else%}
        <br>


        <div class="alert alert-dark combat_dark"
             style="background: linear-gradient(to right, #0c0c0d, #a6700c, #0c0c0d)">
            <p class="text-light"><span class="text-warning">серійний номер:</span> {{model.serial_no}}</p>
            <p class="text-light"><span class="text-warning">дата выявлення:</span> {{model.dt}}</p>

        </div>

        <div class="main_map">
            <div id="myMap" style="position:relative;width:600px;height:300px;">
                <h5 id='point' class="text-dark">x</h5>
            </div>
            <div class="map_data">
                <input class="form-control text-light" style="background-color: black" placeholder="координати"
                       type="text" id="loc">
                <button onclick="GetMap()" class="btn btn-success">пошук</button>
            </div>
        </div>


        <br>
        <table class="table table-dark table-sm table-hover table-bordered"
               style="background: linear-gradient(to right, #0c0c0d, #a6700c, #0c0c0d)">
            <thead>
            <tr>
                <th scope="col">коордінати дрона</th>
                <th scope="col">height</th>
                <th scope="col">altitude</th>
                <th scope="col">коордінати пульта</th>
                <th scope="col">коордінати homepoint</th>


            </tr>
            </thead>
            {%for el in model_detail%}
            <tbody>
            <tr class="main_row">
                <td>
                    {{el.latitude}}
                    {{el.longitude}}

                </td>
                <td>{{el.height}}</td>
                <td>{{el.altitude}}</td>
                <td>
                    {{el.phone_app_latitude}}
                    {{el.phone_app_longitude}}
                </td>
                <td>
                    {{el.home_latitude}}
                    {{el.home_longitude}}
                </td>


            </tr>

            </tbody>
            {%endfor%}
        </table>
        {%endif%}
    </div>
    {%else%}

    <div class="no_data">
        <h3 class="text-light">no such data</h3>
    </div>
    {%endif%}
</div>

<script type='text/javascript' src="/static/main_djmil/js/bing_map_api_js.js">
</script>

<script src="/static/main_djmil/js/main_js.js">
</script>


{%endblock%}